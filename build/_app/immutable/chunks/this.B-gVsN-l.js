import{i as S,E as b,H as o,j as y,k as u,l as c,p as E,m as A,n as N,d as q,q as R,S as x}from"./runtime.qmEkR-JF.js";import{h as D,a as F,s as d}from"./disclose-version.Dfihta4J.js";function O(s,a,l,i=null,e=!1){let f=null,t=null,r=null;const T=S(()=>{if(r===(r=!!a()))return;let n=!1;if(D){const k=s.data===o;r===k&&(y(F),d(!1),n=!0)}r?(f?u(f):f=c(()=>l(s)),t&&E(t,()=>{t=null})):(t?u(t):i&&(t=c(()=>i(s))),f&&E(f,()=>{f=null})),n&&d(!0)});e&&(T.f|=b)}function h(s,a){var i;var l=s&&((i=s[x])==null?void 0:i.t);return s===a||l===a}function Y(s,a,l,i){A(()=>{var e,f;return N(()=>{e=f,f=(i==null?void 0:i())||[],q(()=>{s!==l(...f)&&(a(s,...f),e&&h(l(...e),s)&&a(null,...e))})}),()=>{R(()=>{f&&h(l(...f),s)&&a(null,...f)})}})}export{Y as b,O as i};
